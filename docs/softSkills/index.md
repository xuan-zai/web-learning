---
title: ä½¿ç”¨ github Actions è‡ªåŠ¨åŒ–éƒ¨ç½²ä½ çš„ç½‘é¡µ
nav:
  title: å‰ç«¯è½¯æŠ€èƒ½
  order: 1
group:
  title: GitHub Actions
  order: 1
---

# ä½¿ç”¨ Github Actions è‡ªåŠ¨åŒ–éƒ¨ç½²ä½ çš„ç½‘é¡µ

å¾ˆå¤šäººéƒ½çŸ¥é“å¯ä»¥ä½¿ç”¨ [Github Page](https://pages.github.com/) æ¥éƒ¨ç½²é™æ€ç½‘é¡µã€‚

æˆ‘ä»¬æŠŠæœ¬åœ°çš„ä»£ç æ‰“åŒ…ä¹‹åï¼Œåœ¨æ¨é€åˆ°è¿œç¨‹ä»“åº“ä¸­ï¼Œç„¶ååœ¨æŠŠæ‰“åŒ…çš„æ–‡ä»¶å¤¹ï¼ˆä¸€èˆ¬æ˜¯ `dist`ï¼‰æ¨é€åˆ°éƒ¨ç½²çš„é‚£ä¸ªåˆ†æ”¯ä¸Šï¼ˆä¸€èˆ¬æ˜¯ `gh-pages`ï¼‰ã€‚

è™½ç„¶æ­¥éª¤å¾ˆç®€å•ï¼Œä½†æ˜¯å½“æˆ‘ä»¬æ¯ä¸€æ¬¡æ›´æ–°ä»£ç ä¹‹åï¼Œéƒ½è¦é‡å¤ä¸€éè¿™æ ·çš„å·¥ä½œï¼Œä¹…è€Œä¹…ä¹‹ï¼Œå°±ä¼šæµªè´¹å¾ˆå¤šä¼‘æ¯æ—¶é—´ï¼›è€Œä¸”è¿™ä¹ˆåšä¹Ÿæœ‰ä¸€å®šçš„é£é™©ï¼Œä¸‡ä¸€å“ªå¤©ä½ å¿˜è®°æŠŠæœ€æ–°çš„ `dist` æ¨é€åˆ° `gh-pages` åˆ†æ”¯ï¼Œé‚£ä¹ˆä½ ç½‘ç«™çš„å†…å®¹å°±ä¸ä¼šè¿›è¡Œæ›´æ–°ï¼Œå½±å“ç”¨æˆ·çš„ä½¿ç”¨ã€‚

é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•ï¼Œåœ¨æˆ‘ä»¬æŠŠä»£ç æäº¤åˆ°ä¸»åˆ†æ”¯ï¼ˆ`master`ï¼‰æ—¶ï¼Œè‡ªåŠ¨å¸®æˆ‘ä»¬æŠŠ `dist` æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹è‡ªåŠ¨æ¨é€åˆ° `gh-pages` åˆ†æ”¯ä¸­å‘¢ï¼Ÿ

å½“ç„¶æœ‰å•¦ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `Github Actions` æ¥è§£æ”¾æˆ‘ä»¬çš„åŒæ‰‹ã€‚

## Github Actions

- `Github Actions` æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

  > å®ƒæ˜¯ä¸€ç§æŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜å¹³å°ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒç”¨äºè‡ªåŠ¨æ‰§è¡Œç”Ÿæˆã€æµ‹è¯•å’Œéƒ¨ç½²ã€‚
  > æˆ‘çš„ä¸ªäººç†è§£ï¼š
  > å°±æ¯”å¦‚æˆ‘ä»¬æƒ³è¦å®ç°ä¸Šé¢çš„éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€æ®µè„šæœ¬ï¼Œè„šæœ¬ä»£æ›¿æˆ‘ä»¬å»æ‰§è¡Œã€‚ç”±äºè¿™äº›éœ€æ±‚å…·æœ‰æé«˜çš„è€¦åˆåº¦ï¼Œä¹Ÿä¸ºäº†æé«˜å¼€å‘è€…çš„å¼€å‘æ•ˆç‡ï¼Œ`Github` æŠŠè¿™äº›è„šæœ¬é›†åˆåœ¨ [GitHub Marketplace](https://github.com/marketplace) ä¸­ï¼Œç»Ÿç§°ä»–ä»¬ä¸º `actions`ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè‡ªå·±éœ€è¦çš„ `action` è¿›è¡Œç»„åˆå·²å®Œæˆè‡ªå·±çš„éœ€æ±‚ã€‚å½“ç„¶å•¦ï¼Œå¦‚æœä½ ä¸æƒ³ä½¿ç”¨ `GitHub Marketplace` ä¸­çš„ `action` ä¹Ÿå¯ä»¥è‡ªå·±è¿›è¡Œç¼–å†™ï¼Œç”šè‡³å¯ä»¥æŠŠè‡ªå·±ç¼–å†™çš„ `action` ä¸Šä¼ åˆ° `GitHub Marketplace` ä¸­ã€‚

- è®¤è¯†å·¥ä½œæµ

  > åœ¨æˆ‘ä»¬å¯¹ `Github Actions` æœ‰äº†ä¸€ä¸ªåˆæ­¥çš„äº†è§£ä¹‹åï¼Œåœ¨è¿›è¡Œä½¿ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦äº†è§£å¦ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œé‚£å°±æ˜¯å·¥ä½œæµã€‚

  - ä»€ä¹ˆæ˜¯å·¥ä½œæµå‘¢ï¼Ÿ

    > å·¥ä½œæµæ˜¯ä¸€ä¸ªå¯é…ç½®çš„è‡ªåŠ¨åŒ–è¿‡ç¨‹ï¼Œå®ƒå°†è¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ªä½œä¸šã€‚å®ƒåœ¨å­˜å‚¨åº“çš„ `yaml` æ–‡ä»¶ä¸­å®šä¹‰ï¼Œå¹¶ä¸”ä¼šåœ¨å­˜å‚¨åº“ä¸­çš„äº‹ä»¶è§¦å‘æ—¶è¿è¡Œï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨è§¦å‘æˆ–è€…æŒ‰ç…§å®šä¹‰çš„æ—¶é—´è§¦å‘ã€‚

    > åœ¨ä¸€ä¸ªå­˜å‚¨åº“ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰å¤šä¸ªå·¥ä½œæµï¼Œæ¯ä¸ªå·¥ä½œæµå¯ä»¥æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚å®ƒä»¬å…¨éƒ¨éƒ½å®šä¹‰åœ¨å­˜å‚¨åº“çš„ `.github/workflows` ä¸­ã€‚

- ä½¿ç”¨ `Github Actions`

  > æˆ‘ä»¬çŸ¥é“äº† `Github Actions`ï¼Œä¹Ÿäº†è§£äº† `å·¥ä½œæµ`ã€‚ç°åœ¨æˆ‘ä»¬å°±æ¥åˆ›å»ºä¸€ä¸ªå·¥ä½œæµï¼Œå®Œæˆæˆ‘ä»¬çš„éƒ¨ç½²å·¥ä½œå§ã€‚

  - æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„å­˜å‚¨åº“ä¸­æ‰§è¡Œè¿™æ ·ä¸€æ¡å‘½ä»¤ï¼Œç”¨äºåˆ›å»ºå­˜æ”¾å·¥ä½œæµçš„ç›®å½•ã€‚

    ```shell
      mkdir .github && cd .github && mkdir workflow
    ```

    ç»“æœæ˜¯è¿™æ ·çš„ï¼š

    ![create_workflows](../../assets/image/create_workflows.png)

  - ç°åœ¨æˆ‘ä»¬æ¥é…ç½®æˆ‘ä»¬çš„éƒ¨ç½²å·¥ä½œæµï¼Œåœ¨ `.github/workflows` æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªåä¸º `deploy.yml` çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬çš„å·¥ä½œæµå°†åœ¨è¿™é‡Œç¼–å†™ï¼š

    ```yaml
    name: deploy demo # è¿™ä¸ªå·¥ä½œæµçš„åå­—
    on: # ç”¨äºç›‘å¬å­˜å‚¨åº“çš„äº‹ä»¶
      push: # æˆ‘ä»¬è¿™é‡Œç›‘å¬ push äº‹ä»¶
        braches: # ç›‘å¬çš„åˆ†æ”¯
          - master # master åˆ†æ”¯
    # ğŸ‘†ä¸Šé¢å››è¡Œè„šæœ¬çš„æ„æ€æ˜¯ï¼šæˆ‘ä»¬åªç›‘å¬å…³äº master çš„ push äº‹ä»¶

    jobs: # ä»£è¡¨å·¥ä½œçš„æ„æ€
      deploy: # è¿™ä¸ªå·¥ä½œçš„åå­—æ˜¯ deploy
        runs-on: ubuntu-latest # è¿™ä¸ªå·¥ä½œåœ¨ä»€ä¹ˆè¿è¡Œå™¨ä¸Šè¿è¡Œï¼Œè¿™é‡Œçš„æ„æ€æ˜¯åœ¨æœ€æ–°ç‰ˆæœ¬çš„ Ubuntu Linux ä¸Šè¿è¡Œ
        steps: # å®Œæˆè¿™ä¸ªå·¥ä½œéœ€è¦å“ªäº›æ­¥éª¤
          - name: checkout # æ­¥éª¤ä¸€çš„åå­—
            uses: actions/checkout@v3 # uses ä»£è¡¨ç€åœ¨è¿™é‡Œæ­¥éª¤ä¸­ä¼šè¿è¡Œ actions/checkout@v3 è¿™æ˜¯å°†ä»£ç ç­¾å‡ºåˆ°è¿è¡Œå™¨ä¸Šçš„æ„æ€ å¦‚æœæœ‰ä»€ä¹ˆéœ€è¦æ³¨æ„çš„ï¼Œå¯ä»¥å†™åœ¨ with ä¸­ï¼Œå¦‚ä¸‹
          - name: deploy # æ­¥éª¤äºŒçš„åå­—
            uses: peaceiris/actions-gh-pages@v3 # è¿è¡Œ peaceiris/actions-gh-pages@v3 å¯ä»¥å°†é™æ€æ–‡ä»¶éƒ¨ç½²åˆ° Github Page ä¸Šï¼Œä¸‹é¢æ˜¯ä¸€äº›ä½¿ç”¨ peaceiris/actions-gh-pages@v3 éœ€è¦çš„é…ç½®ï¼Œå…·ä½“çš„å¯ä»¥çœ‹æ–‡æ¡£
            with:
              github_token: ${{ secrets.GITHUB_TOKEN }}
              publish_dir: ./dist
              publish_branch: gh-pages
    ```

  - å½“æˆ‘ä»¬å®Œæˆä¸Šé¢è¿™æ­¥çš„æ—¶å€™ï¼Œ`Github Actions` å°±ä¼šç›‘å¬æˆ‘ä»¬ `push` åˆ° `master` åˆ†æ”¯ä¸Šçš„äº‹ä»¶ï¼Œç„¶åè‡ªåŠ¨è¿è¡Œ `deploy.yml` æ–‡ä»¶ï¼Œè¾¾åˆ°ä¸€ä¸ªéƒ¨ç½²é™æ€é¡µé¢çš„æ•ˆæœã€‚

---

å‚è€ƒèµ„æ–™ï¼š

ã€1ã€‘ï¼šGithub Pageï¼šhttps://pages.github.com/

ã€2ã€‘ï¼šGithub Actionsï¼šhttps://docs.github.com/zh/actions/learn-github-actions/understanding-github-actions

ã€3ã€‘ï¼špeaceiris/actions-gh-pages@v3ï¼šhttps://github.com/marketplace/actions/github-pages-action
